# Amazon S3 Overview

## Amazon S3
Amazon Simple Storage Service (Amazon S3) is a scalable, secure, and durable object storage service that enables users to store and retrieve any amount of data from anywhere on the web.

---

## Amazon S3 Use Cases
Amazon S3 is used for various purposes, including:

- **Backup and Recovery**: Store and recover critical data securely.
- **Data Archiving**: Long-term storage with cost-effective solutions like Glacier.
- **Content Storage and Distribution**: Deliver static or dynamic content globally.
- **Big Data Analytics**: Store large datasets for analysis.
- **Static Website Hosting**: Host static websites directly from S3 buckets.
- **Application Data Storage**: Store user data or application configurations.

---

## Amazon S3 - Buckets
Buckets are top-level containers for data in S3.

### Key Features:
- Each bucket is globally unique.
- Bucket names comply with DNS naming conventions.
- Buckets define a scope for S3 data access and management.

---

## Amazon S3 - Objects
Objects are the fundamental storage units in S3.

### Key Features:
- An object consists of data and metadata.
- Identified by a unique key within a bucket.
- Maximum object size: 5TB (uploads larger than 5GB require multi-part upload).

---

## Amazon S3 – Security
Amazon S3 provides multiple layers of security:

### Key Features:
- **Encryption**: Supports server-side (SSE) and client-side encryption.
- **Access Control**: Managed using IAM policies, bucket policies, and access control lists (ACLs).
- **Bucket Versioning**: Maintains previous versions of objects for data recovery.

---

## S3 Bucket Policies
Bucket policies define rules to grant or restrict access to the bucket and objects.

---

### Example: Public Access - Use Bucket Policy
A bucket policy can make a bucket publicly accessible by granting permissions to `Principal: "*"`.

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::example-bucket/*"
    }
  ]
}
```

---

### Example: User Access to S3 – IAM Permissions
Grant a specific IAM user permission to read from a bucket.

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::example-bucket/*"
    }
  ]
}
```

---

### Example: EC2 Instance Access - Use IAM Roles
IAM roles grant EC2 instances temporary access to S3.

1. Attach an IAM role with S3 permissions to the EC2 instance.
2. Use the instance metadata service to retrieve temporary credentials.

---

### Advanced: Cross-Account Access – Use Bucket Policy
Enable another AWS account to access your bucket.

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {"AWS": "arn:aws:iam::123456789012:root"},
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::example-bucket/*"
    }
  ]
}
```

---

## Bucket Settings for Block Public Access
S3 provides settings to block public access to buckets and objects at both account and bucket levels.

---

## Amazon S3 – Static Website Hosting
Host static websites directly from an S3 bucket.

### Steps:
1. Enable static website hosting in bucket properties.
2. Configure an index and error document.
3. Access the website using the bucket's endpoint.

---

## Amazon S3 - Versioning
Versioning enables maintaining multiple versions of an object in a bucket.

### Benefits:
- Protects against accidental overwrites and deletions.
- Allows recovery of previous versions of objects.

---

## Amazon S3 – Replication (CRR & SRR)

### Cross-Region Replication (CRR):
- Replicates objects across AWS regions.
- Improves data availability and compliance.

### Same-Region Replication (SRR):
- Replicates objects within the same region.
- Enhances redundancy and backups.

---

## S3 Storage Classes
Amazon S3 offers various storage classes for different use cases.

---

### S3 Durability and Availability
- **Durability**: 99.999999999% (11 9's).
- **Availability**: Varies by storage class.

---

### S3 Standard – General Purpose
- High durability and availability.
- Suitable for frequently accessed data.

---

### S3 Storage Classes – Infrequent Access
- Cost-effective for data accessed less frequently.
- Options: S3 Standard-IA and S3 One Zone-IA.

---

### Amazon S3 Glacier Storage Classes
- Designed for archiving and long-term storage.
- Options: S3 Glacier Instant Retrieval, S3 Glacier Flexible Retrieval, and S3 Glacier Deep Archive.

---

### S3 Intelligent-Tiering
- Automatically moves data to the most cost-effective storage class based on access patterns.
- Ideal for unpredictable workloads.

---

### S3 Storage Classes Comparison

| Storage Class            | Use Case                         | Durability   | Availability |
|--------------------------|-----------------------------------|--------------|--------------|
| S3 Standard              | Frequently accessed data         | 11 9's       | High         |
| S3 Standard-IA           | Infrequent access                | 11 9's       | Moderate     |
| S3 One Zone-IA           | Infrequent access (single AZ)    | 11 9's       | Moderate     |
| S3 Glacier               | Archival storage                 | 11 9's       | Varies       |
| S3 Intelligent-Tiering   | Variable access patterns         | 11 9's       | High         |

---

### S3 Storage Classes – Price Comparison
Pricing varies based on storage class, with S3 Glacier and S3 Glacier Deep Archive being the most cost-effective for long-term storage. Check AWS documentation for up-to-date pricing details.

